{{ 'section-happy-customers.css' | asset_url | stylesheet_tag }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .happy-customers-section {
    background-color: {{ section.settings.bg_color }};
  }

{%- endstyle -%}

<div id="review" class="happy-customers-section section-{{ section.id }}-padding">
  <div class="">
    {%- if section.settings.show_badge -%}
    <div class="happy-customers-badge">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
      <span>{{ section.settings.badge_text }}</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
    </div>
    {%- endif -%}

    {%- if section.settings.subheading != blank -%}
      <div class="happy-customers-subheading">{{ section.settings.subheading }}</div>
    {%- endif -%}

    {%- if section.settings.heading != blank -%}
      <h2 class="happy-customers-heading">{{ section.settings.heading }}</h2>
    {%- endif -%}

    <div class="happy-customers-slider swiper">
      <div class="swiper-wrapper">
        {%- for block in section.blocks -%}
          <div class="swiper-slide">
            <div class="happy-customer-card">
              <div class="customer-name">{{ block.settings.author }}</div>
              <div class="customer-rating">
                {%- for i in (1..5) -%}
                  {%- if i <= block.settings.rating -%}
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                  {%- else -%}
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                  {%- endif -%}
                {%- endfor -%}
              </div>
              <strong class="product-name">{{ block.settings.product_name }}</strong>
              <div class="customer-review">{{ block.settings.text }}</div>
            </div>
          </div>
        {%- endfor -%}
      </div>
      
      <div class="happy-customers-controls">
        <div class="swiper-button-prev">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="autoplay-progress">
          <svg viewBox="0 0 100 10">
            <line x1="0" y1="5" x2="100" y2="5" stroke="#ddd" stroke-width="2" />
            <line x1="0" y1="5" x2="100" y2="5" stroke="#333" stroke-width="2" class="progress-line" />
          </svg>
        </div>
        <div class="swiper-button-next">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const progressLine = document.querySelector('.happy-customers-section .progress-line');
    new Swiper('.happy-customers-slider', {
      slidesPerView: 1.2,
      spaceBetween: 20,
      centeredSlides: false,
      loop: true,
      speed: 1000,
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      on: {
        autoplayTimeLeft(s, time, progress) {
          if (progressLine) {
            progressLine.style.strokeDashoffset = 100 * (1 - progress);
            progressLine.style.strokeDasharray = 100;
          }
        }
      },
      breakpoints: {
        640: {
          slidesPerView: 1.5,
          spaceBetween: 20,
        },
        768: {
          slidesPerView: 2.5,
          spaceBetween: 30,
        },
        1024: {
          slidesPerView: 3.5,
          spaceBetween: 40,
        },
      }
    });
  });
</script>

{% schema %}
{
  "name": "Happy Customers",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#FFFFFF"
    },
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show Badge",
      "default": true
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "300,000+ online ratings and reviews"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "OUR PROMISE OF PURITY, PROVEN BY THE PEOPLE WHO USE OUR PRODUCTS DAILY"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "From Our Happy Customers"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Author Name"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Rating",
          "default": 5
        },
        {
          "type": "text",
          "id": "product_name",
          "label": "Product Name",
          "default": "Product Name"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review Text",
          "default": "Review text goes here."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Happy Customers",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
              "author": "Isha Keskar",
              "rating": 5,
              "product_name": "Tulips Cotton Pad",
              "text": "Undoubtedly one of the best. Been using for years and ordering multiple times. Will definitely recommend."
          }
        },
        {
          "type": "testimonial",
          "settings": {
              "author": "Sonali Umare",
              "rating": 4,
              "product_name": "Wow! Amazing product, like no one in the market",
              "text": "Amazing cotton padsâ€”truly the best in the market! Double-sided, high-quality, and perfect for sensitive skin. I use them with micellar water every night, and they visibly remove dirt. Great packaging, multipurpose, and budget-friendly. Highly recommended!"
          }
        },
        {
          "type": "testimonial",
          "settings": {
              "author": "Jyotsassy Arya",
              "rating": 5,
              "product_name": "Affordable and best",
              "text": "Go for it without any second thoughts. It is very nice soft and thick cotton pad. Can easily remove makeup. Is gentle on your skin and Very affordable. Go for it at this price you won't get 50 pads in other brands."
          }
        },
        {
          "type": "testimonial",
          "settings": {
              "author": "Vaidehee",
              "rating": 4,
              "product_name": "Good product",
              "text": "Tulips has really good products. I've used their ear buds and my sister's makeup remover pads. It's different texture on both the sides has soft and other has ridges. It's really good and smudge proof. Removes makeup easily. Nice quality and quantity."
          }
        },
        {
          "type": "testimonial",
          "settings": {
              "author": "Priya Sharma",
              "rating": 5,
              "product_name": "Soft and Gentle",
              "text": "These cotton pads are incredibly soft on the skin. I use them daily for toner application and they never irritate my skin. excellent quality!"
          }
        },
        {
          "type": "testimonial",
          "settings": {
              "author": "Rahul Verma",
              "rating": 5,
              "product_name": "Great Value",
              "text": "Value for money product. The thickness is perfect and they don't fall apart while using. Definitely buying again."
          }
        },
        {
          "type": "testimonial",
          "settings": {
              "author": "Anjali Mehta",
              "rating": 4,
              "product_name": "Eco-friendly choice",
              "text": "Love that these are biodegradable. Good for the skin and good for the planet. Highly efficient in removing makeup."
          }
        },
        {
          "type": "testimonial",
          "settings": {
              "author": "Snea Gupta",
              "rating": 5,
              "product_name": "Must have!",
              "text": "A staple in my skincare routine. The texture is smooth and they are very absorbent. Best cotton pads available online."
          }
        }
      ]
    }
  ]
}
{% endschema %}
